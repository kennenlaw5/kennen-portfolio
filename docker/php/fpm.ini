[www]
listen = 9000
log_level = debug

; --- Error Handling (Keep These) ---
php_flag[display_errors] = on
php_flag[display_startup_errors] = on
php_admin_value[error_reporting] = E_ALL
php_admin_value[error_log] = /var/log/php-fpm_errors.log
catch_workers_output = yes

; --- Process Manager Settings (CRITICAL CHANGES HERE) ---

; Choose a process manager mode.  'dynamic' is a good default.
pm = dynamic

; The maximum number of child processes.
pm.max_children = 5

; The number of child processes created on startup.
pm.start_servers = 2

; The minimum number of idle server processes.
pm.min_spare_servers = 1

; The maximum number of idle server processes.
pm.max_spare_servers = 3

; --- VERY IMPORTANT: Increase this timeout ---
; The number of seconds after which an idle process will be killed.
pm.process_idle_timeout = 600s

; --- Opcache settings (Keep These) ---
[opcache]
opcache.enable = 1
opcache.validate_timestamps = 0
opcache.revalidate_freq = 0
opcache.save_comments = 0
opcache.fast_shutdown = 1